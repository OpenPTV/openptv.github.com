<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>19 Retriving statistical information from the Distribution layer: DPStatistics</TITLE><LINK href="ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node53.html#chapter.dpinit">&lt;&lt; Prev</A></TD><TD><A href="index.html">- Up -</A></TD><TD><A href="node55.html#chapter.open">Next &gt;&gt;</A></TD></TR></TABLE><DIV id="chapter.dpstatistics"><H1><A name="chapter.dpstatistics">19 Retriving statistical information from the Distribution layer: <CODE>DPStatistics</CODE></A></H1><P>To be able to understand and tune distributed Mozart programs the distribution layer can produce log files and exposes interfaces to it's inner state. </P><H2><A name="label622">19.1 Interface of <CODE>DPStatistics</CODE> Module</A></H2><P></P><DL><DT><CODE>DPStatistics<SPAN class="keyword">.</SPAN>siteStatistics&nbsp;</CODE></DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{DPStatistics<SPAN class="keyword">.</SPAN>siteStatistics&nbsp;</CODE><CODE>?<I>SiteList</I></CODE><CODE>}&nbsp;&nbsp;</CODE></P></BLOCKQUOTE></DD><DD><P>Returns a list of all currently know remote sites. <CODE>SiteList</CODE> contains records that has the following fields: </P><DL><DT><CODE>ip</CODE></DT><DD><P>The ip number of the remote site in string format. </P></DD><DT><CODE>lastRTT</CODE></DT><DD><P>The last measured round trip to the remote site in ms. If no connection is established the value is <CODE><SPAN class="keyword">~</SPAN>1</CODE>. </P></DD><DT><CODE>pid</CODE></DT><DD><P>The proces identifier of the remote sites proces. </P></DD><DT><CODE>port</CODE></DT><DD><P>The tcp port of the remote site. It is used for accepting connection atempts. </P></DD><DT><CODE>received</CODE></DT><DD><P>Number of received messages from the remote site. This number will be cleared at each invokation to <CODE>DPStatistics<SPAN class="keyword">.</SPAN>siteStatistics&nbsp;</CODE></P></DD><DT><CODE>sent</CODE></DT><DD><P>Number of messages sent to the remote site from this site. This number will be cleared at each invokation to <CODE>DPStatistics<SPAN class="keyword">.</SPAN>siteStatistics&nbsp;</CODE></P></DD><DT><CODE>state</CODE></DT><DD><P>The state of the remote site from the current sites point of view. </P></DD><DT><CODE>table</CODE></DT><DD><P>Internal information.</P></DD><DT><CODE>siteid</CODE></DT><DD><P>The unique string identifying the remote site. </P></DD><DT><CODE>timestamp</CODE></DT><DD><P>The time when the remote site was created. </P></DD></DL><P> </P></DD><DT><CODE>DPStatistics<SPAN class="keyword">.</SPAN>getTablesInfo&nbsp;</CODE></DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{DPStatistics<SPAN class="keyword">.</SPAN>getTablesInfo&nbsp;</CODE><CODE>?<I>TableInfo</I></CODE><CODE>&nbsp;}&nbsp;</CODE></P></BLOCKQUOTE></DD><DD><P>Returns information about the tables holding imported and exported entities. <CODE>TableInfo</CODE> is a list containing of the following format: </P><P><CODE>[bt(list:BTlist&nbsp;size:BTsize)&nbsp;ot(list:OTlist&nbsp;size:OTsize)]&nbsp;</CODE> </P><DL><DT><CODE>BTlist</CODE></DT><DD><P>A list of all currently imported entities, each entry in the list are of the following format:</P><P><CODE>be(index:OTindex&nbsp;na:NetAddress&nbsp;primCred:PrimCredit&nbsp;secCred:SecCredit&nbsp;type:Type)</CODE> </P></DD><DT><CODE>BTsize</CODE></DT><DD><P>The size of the Borrow table. The borrow table will grow and shrink to fit the number of imported entities. </P></DD><DT><CODE>OTlist</CODE></DT><DD><P>A list of all currently exported entities, each entry in the list are of the following format: </P><P><CODE>&nbsp;oe(credit:PrimCredit&nbsp;index:OTindex&nbsp;type:Type)</CODE> </P></DD><DT><CODE>OTsize</CODE></DT><DD><P>The size of the Owner table. The owner table will grow and shrink to fit the number of exported entities. </P></DD></DL><P> </P></DD><DT><CODE>DPStatistics<SPAN class="keyword">.</SPAN>getNetInfo&nbsp;</CODE></DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{DPStatistics<SPAN class="keyword">.</SPAN>getNetInfo&nbsp;&nbsp;</CODE><CODE>?<I>NetInfo</I></CODE><CODE>&nbsp;}&nbsp;</CODE></P></BLOCKQUOTE></DD><DD><P>Returns information about internaly allocated object in the distribution layer. <CODE>NetInfo</CODE> is a list containing records with the following fields </P><DL><DT><CODE>type</CODE></DT><DD><P>The type of the object</P></DD><DT><CODE>nr</CODE></DT><DD><P>The number of allocated objects of this type</P></DD><DT><CODE>size</CODE></DT><DD><P>The size of this object in bytes. </P></DD></DL><P></P></DD><DT><CODE>DPStatistics<SPAN class="keyword">.</SPAN>perdioStatistics&nbsp;</CODE></DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{DPStatistics<SPAN class="keyword">.</SPAN>perdioStatistics&nbsp;&nbsp;&nbsp;</CODE><CODE>?<I>Ans</I></CODE><CODE>&nbsp;}</CODE></P></BLOCKQUOTE></DD><DD><P>The distribution layer keeps information of the number of received and sent messages per message type basis as the number of marshaled and unmarshaled marshaling types. This information is returned in record with the following fields: </P><DL><DT><CODE>recv</CODE></DT><DD><P>Contains a record with the total number of unmarshaled dif's per type and received messages per message type. </P></DD><DT><CODE>sent</CODE></DT><DD><P>Contains a record with the total number of marshaled dif's per type and sent messages per message type. </P></DD></DL><P> </P></DD><DT><CODE>DPStatistics<SPAN class="keyword">.</SPAN>createLogFile</CODE></DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{DPStatistics<SPAN class="keyword">.</SPAN>createLogFile&nbsp;</CODE><CODE>+<I>File</I></CODE><CODE>}</CODE></P></BLOCKQUOTE></DD><DD><P>Directs the loging output from the distribution layer to the file <CODE>File</CODE>. </P></DD></DL><P> </P></DIV><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node53.html#chapter.dpinit">&lt;&lt; Prev</A></TD><TD><A href="index.html">- Up -</A></TD><TD><A href="node55.html#chapter.open">Next &gt;&gt;</A></TD></TR></TABLE><HR><ADDRESS><A href="http://www.ps.uni-sb.de/~duchier/">Denys&nbsp;Duchier</A>, <A href="http://www.ps.uni-sb.de/~kornstae/">Leif&nbsp;Kornstaedt</A>, <A href="http://www.ps.uni-sb.de/~homik/">Martin&nbsp;Homik</A>, <A href="http://www.ps.uni-sb.de/~tmueller/">Tobias&nbsp;Müller</A>, <A href="http://www.ps.uni-sb.de/~schulte/">Christian&nbsp;Schulte</A> and&nbsp;<A href="http://www.info.ucl.ac.be/~pvr">Peter&nbsp;Van Roy</A><BR><SPAN class="version">Version 1.4.0 (20080702)</SPAN></ADDRESS></BODY></HTML>
