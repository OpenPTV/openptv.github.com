<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>6 Limitations and Modifications</TITLE><LINK href="ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node5.html#chapter.ft_examples">&lt;&lt; Prev</A></TD><TD><A href="index.html">- Up -</A></TD><TD><A href="bib.html#label266">Next &gt;&gt;</A></TD></TR></TABLE><DIV id="chapter.limits"><H1><A name="chapter.limits">6 Limitations and Modifications</A></H1><P>The current release has the following limitations and modifications with respect to the specifications of the distribution model and the failure model. A <EM>limitation</EM> is an operation that is specified but is not possible or has lower performance in the current release. A <EM>modification</EM> is an operation that is specified but behaves differently in the current release. </P><P>Most of the limitations and modifications listed here will be removed in future releases. </P><H2><A name="label262">6.1 Performance limitations</A></H2><P>These reduce performance but do not affect language semantics. They can safely be ignored if performance is not an issue. </P><UL><LI><P>The following problems are related to the <CODE>Remote</CODE> module and virtual sites (see also <A href="../system/node48.html#chapter.remote">Chapter&nbsp;13 of ``System Modules''</A>). </P><UL><LI><P>On some platforms (in particular, Solaris), the operating system in its default configuration does not support virtual sites efficiently (see also <A href="../system/node48.html#chapter.remote">Chapter&nbsp;13 of ``System Modules''</A>). This is due to a system-wide limit on the number of shared memory pages. For Solaris, the default is six shared pages per process and 100 system-wide. Changing this limit requires rebooting the machine. Since at least two pages are needed for efficient communication, the default value results in poor performance if a site connects to more than three virtual sites. </P></LI><LI><P>The Mozart system does its best to reclaim shared memory identifiers, even upon process crashes, but it is still possible that some shared memory pages become unaccounted for and thus stay forever in the operating system. If this happens please use Unix utilities to get rid of them. On Solaris and Linux there are two, namely <CODE>ipcs</CODE> and <CODE>ipcrm</CODE>.</P></LI></UL><P> </P></LI><LI><P>By default the code of functions, procedures, classes, and functors (but not objects) is always inserted in messages, even if the code is already present at the destination. By annotating those entities as <CODE>eager</CODE> or <CODE>lazy</CODE>, the code is copied across the network only if it is not present on the destination site. </P></LI><LI><P>The distributed garbage collection algorithm reclaims all unused entities except those forming a reference cycle that exists on at least two different owner sites (a <EM>cross-site cycle</EM>). For example, if two sites each own an object that references the other, then they will never be reclaimed. It is up to the programmer to break the cycle by updating one of the objects to no longer reference the other. </P></LI><LI><P>If a site crashes that has references to entities created on other sites, then these entities are not garbage-collected. A new distributed garbage collection scheme can recover from that situation; it is based on a time lease. Use the annotation <CODE>lease</CODE> to use that new scheme.</P></LI></UL><P> </P><H2><A name="label263">6.2 Functionality limitations</A></H2><P>These affect what operations are available to the programmer. They document where the full language specification is not implemented. We hope that the undergrowth of limitations is sparse enough to let the flowers of Oz grow unwithered.<A href="node6.html#label265"><SUP>1</SUP></A> </P><UL><LI><P>On Windows, the <CODE>Remote</CODE> module has limited functionality. Only a single option is possible for <CODE>fork</CODE>, namely <CODE>sh</CODE>. Future releases will add more options. </P></LI><LI><P>The <CODE>Connection</CODE> module does not work correctly for applications separated by a firewall. This limitation will be addressed in a future release. </P></LI><LI><P>Threads, weak dictionaries, and spaces are sited, even though they are in base modules. However, dictionaries and arrays are no longer sited since version 1.4.0. Weak dictionaries have been kept sited so that their finalization mechanism relies on the garbage collector of a specific site. It is not known how to define finalization in case the state of the weak dictionary is replicated on several site. </P></LI><LI><P>When a reference to a constrained variable (finite domain, finite set, or free record) is passed to another site, then this reference is converted to a <EM>future</EM>. The future will be bound when the constrained variable becomes determined. Note that reference integrity is preserved: the future will be correctly identified as the original variable if it is sent back to its home site.</P></LI></UL><P> </P><H2><A name="label264">6.3 Modifications</A></H2><P>There is no modification to the formal semantics of the language. </P></DIV><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node5.html#chapter.ft_examples">&lt;&lt; Prev</A></TD><TD><A href="index.html">- Up -</A></TD><TD><A href="bib.html#label266">Next &gt;&gt;</A></TD></TR></TABLE><HR align="left" width="30%"><DIV class="footnote"><A name="label265">1. </A>C. A. R. Hoare, <EM>The Emperor's Old Clothes</EM>, 1980 Turing Award Lecture.</DIV><HR><ADDRESS><A href="http://www.info.ucl.ac.be/~pvr">Peter&nbsp;Van Roy</A>, <A href="http://www.sics.se/~seif">Seif&nbsp;Haridi</A>, <A href="http://www.sics.se/~perbrand">Per&nbsp;Brand</A> and&nbsp;<A href="http://www.info.ucl.ac.be/~raph">Raphael&nbsp;Collet</A><BR><SPAN class="version">Version 1.4.0 (20080702)</SPAN></ADDRESS></BODY></HTML>
