<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>9.10 Functors</TITLE><LINK href="ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="object.html#section.chunks.objects">&lt;&lt; Prev</A></TD><TD><A href="node11.html">- Up -</A></TD></TR></TABLE><DIV id="section.chunks.functors"><H2><A name="section.chunks.functors">9.10 Functors</A></H2><P> The module <A name="label669"></A><SPAN class="index"><CODE>Functor</CODE></SPAN> contains procedures operating on functors. </P><DL><DT><CODE>is</CODE> <A name="label671"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{Functor<SPAN class="keyword">.</SPAN>is&nbsp;</CODE><CODE>+<I>X</I></CODE><CODE>&nbsp;</CODE><CODE>?<I>B</I></CODE><CODE>}</CODE> </P></BLOCKQUOTE></DD><DD><P>tests whether <CODE><I>X</I></CODE> is a functor. </P></DD><DT><CODE>new</CODE> <A name="label673"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{Functor<SPAN class="keyword">.</SPAN>new&nbsp;</CODE>&lt;<I>import spec</I>&gt;<CODE>&nbsp;</CODE>&lt;<I>export spec</I>&gt;<CODE>&nbsp;</CODE><CODE>+<I>P</I></CODE><CODE>&nbsp;</CODE><CODE>?<I>Functor</I></CODE><CODE>}</CODE> </P></BLOCKQUOTE></DD><DD><P>returns a new functor with imports as described by the &lt;<I>import spec</I>&gt;, exports as described by the &lt;<I>export spec</I>&gt;, and body as performed by&nbsp;<CODE><I>P</I></CODE>. </P><P> The &lt;<I>import spec</I>&gt; is a record mapping the name of each imported module to a record giving information about it: </P><BLOCKQUOTE><TABLE border="0" cellpadding="0" cellspacing="0" class="compact"><TR valign="top"><TD colspan="3">&lt;<I>import spec</I>&gt;&nbsp;::=&nbsp;</TD></TR><TR valign="top"><TD>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD></TD><TD><CODE><SPAN class="string">'import'</SPAN>(</CODE>&lt;<I>module name</I>&gt;<CODE>:&nbsp;</CODE>&lt;<I>import info</I>&gt;<CODE>&nbsp;</CODE>...</TD></TR><TR valign="top"><TD></TD><TD align="center"></TD><TD><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE>&lt;<I>module name</I>&gt;<CODE>:&nbsp;</CODE>&lt;<I>import info</I>&gt;<CODE>)</CODE></TD></TR></TABLE></BLOCKQUOTE><P></P><BLOCKQUOTE><TABLE border="0" cellpadding="0" cellspacing="0"><TR valign="top"><TD>&lt;<I>module name</I>&gt;</TD><TD align="center">&nbsp;::=&nbsp;</TD><TD>&lt;<I>atom</I>&gt;</TD></TR></TABLE></BLOCKQUOTE><P></P><P> The optional <CODE><SPAN class="string">'from'</SPAN></CODE> field gives the value of this import's <CODE><SPAN class="keyword">at</SPAN></CODE> clause, if given: </P><BLOCKQUOTE><TABLE border="0" cellpadding="0" cellspacing="0"><TR valign="top"><TD>&lt;<I>import info</I>&gt;</TD><TD align="center">&nbsp;::=&nbsp;</TD><TD><CODE>info(type:&nbsp;</CODE>&lt;<I>type</I>&gt;<CODE>&nbsp;</CODE>[<CODE><SPAN class="string">'from'</SPAN>:&nbsp;</CODE>&lt;<I>atom</I>&gt;]<CODE>)</CODE></TD></TR></TABLE></BLOCKQUOTE><P></P><P> The <CODE>type</CODE> field is the expected type of the module. This can be any of the atoms returned by <CODE>Value<SPAN class="keyword">.</SPAN>type</CODE>, plus some more implementation-specific ones, or a record with label <CODE>record</CODE>: </P><P> </P><BLOCKQUOTE><TABLE border="0" cellpadding="0" cellspacing="0" class="compact"><TR valign="top"><TD colspan="3">&lt;<I>type</I>&gt;&nbsp;::=&nbsp;</TD></TR><TR valign="top"><TD>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD></TD><TD><CODE>int</CODE> | <CODE>atom</CODE> | ...</TD><TD align="left"><I>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% see above</I></TD></TR><TR valign="top"><TD></TD><TD align="center">&nbsp;|&nbsp;</TD><TD><CODE>record(</CODE>&lt;<I>feature</I>&gt;<CODE>:&nbsp;</CODE>&lt;<I>type</I>&gt;<CODE>&nbsp;</CODE>...<CODE>&nbsp;</CODE>&lt;<I>feature</I>&gt;<CODE>:&nbsp;</CODE>&lt;<I>type</I>&gt;<CODE>)</CODE></TD></TR><TR valign="top"><TD></TD><TD align="center">&nbsp;|&nbsp;</TD><TD><CODE>nil</CODE></TD><TD align="left"><I>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% no information known</I></TD></TR></TABLE></BLOCKQUOTE><P> </P><P> The &lt;<I>export spec</I>&gt; is a record mapping each feature of the module resulting from applications of this functor to the type of the corresponding value: </P><BLOCKQUOTE><TABLE border="0" cellpadding="0" cellspacing="0"><TR valign="top"><TD>&lt;<I>export spec</I>&gt;</TD><TD align="center">&nbsp;::=&nbsp;</TD><TD><CODE><SPAN class="string">'export'</SPAN>(</CODE>&lt;<I>feature</I>&gt;<CODE>:&nbsp;</CODE>&lt;<I>type</I>&gt;<CODE>&nbsp;</CODE>...<CODE>&nbsp;</CODE>&lt;<I>feature</I>&gt;<CODE>:&nbsp;</CODE>&lt;<I>type</I>&gt;<CODE>)</CODE></TD></TR></TABLE></BLOCKQUOTE><P></P><P> The body is a binary procedure <CODE>{P&nbsp;</CODE>&lt;<I>import</I>&gt;<CODE>&nbsp;</CODE>&lt;<I>export</I>&gt;<CODE>}</CODE> where: </P><BLOCKQUOTE><TABLE border="0" cellpadding="0" cellspacing="0"><TR valign="top"><TD>&lt;<I>import</I>&gt;</TD><TD align="center">&nbsp;::=&nbsp;</TD><TD><CODE><SPAN class="string">'IMPORT'</SPAN>(</CODE>&lt;<I>module name</I>&gt;<CODE>:&nbsp;</CODE>&lt;<I>value</I>&gt;<CODE>&nbsp;</CODE>...<CODE>&nbsp;</CODE>&lt;<I>module name</I>&gt;<CODE>:&nbsp;</CODE>&lt;<I>value</I>&gt;<CODE>)</CODE></TD></TR></TABLE></BLOCKQUOTE><P></P><BLOCKQUOTE><TABLE border="0" cellpadding="0" cellspacing="0"><TR valign="top"><TD>&lt;<I>export</I>&gt;</TD><TD align="center">&nbsp;::=&nbsp;</TD><TD>&lt;<I>value</I>&gt;</TD></TR></TABLE></BLOCKQUOTE><P></P></DD></DL><P></P></DIV><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="object.html#section.chunks.objects">&lt;&lt; Prev</A></TD><TD><A href="node11.html">- Up -</A></TD></TR></TABLE><HR><ADDRESS><A href="http://www.ps.uni-sb.de/~duchier/">Denys&nbsp;Duchier</A>, <A href="http://www.ps.uni-sb.de/~kornstae/">Leif&nbsp;Kornstaedt</A> and&nbsp;<A href="http://www.ps.uni-sb.de/~schulte/">Christian&nbsp;Schulte</A><BR><SPAN class="version">Version 1.4.0 (20080702)</SPAN></ADDRESS></BODY></HTML>
