<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>6.1 Creating and Customizing Profiles</TITLE><LINK href="ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node6.html">- Up -</A></TD><TD><A href="node8.html#prof.params">Next &gt;&gt;</A></TD></TR></TABLE><DIV id="prof.custom"><H2><A name="prof.custom">6.1 Creating and Customizing Profiles</A></H2><P>A profile is an alist providing values for Oz mode variables and environment variables. The best way to create and customize profiles is through Emacs's <CODE>customize</CODE> interface. For example <SPAN class="key">M-x customize-variable RET oz-profiles</SPAN> will provide you with an interactive customization sheet as shown in <A href="node7.html#fig.prof1">Figure&nbsp;6.1</A>. </P><DIV id="fig.prof1"><HR><P><A name="fig.prof1"></A></P><DIV align="center"><IMG alt="" src="prof1.gif"></DIV><P class="caption"><STRONG>Figure&nbsp;6.1:</STRONG> Initial Customization Sheet</P><HR></DIV><P> We create a new profile by clicking the <CODE>INS</CODE> (insert) button, and obtain a new entry as shown in <A href="node7.html#fig.prof2">Figure&nbsp;6.2</A> with many possible settable parameters. </P><DIV id="fig.prof2"><HR><P><A name="fig.prof2"></A></P><DIV align="center"><IMG alt="" src="prof2.gif"></DIV><P class="caption"><STRONG>Figure&nbsp;6.2:</STRONG> After Clicking INS</P><HR></DIV><P> Fortunately, you never need to specify many of them. All the others take appropriate default values. </P><H3><A name="label215">6.1.1 Global Profile</A></H3><P>For example, let's define a profile to use the globally installed Mozart in the usual fashion. Here are the steps to follow: </P><UL><LI><P>Give a name to the profile, e.&nbsp;g. <CODE>global</CODE>.</P></LI><LI><P>Select type <CODE>installed</CODE> from the value menu for the <CODE>Type</CODE> parameter. This type information allows other important settings to be automatically computed.</P></LI><LI><P>Select the <CODE>OZHOME</CODE> parameter by clicking in the box, and then set its value to the directory of an installed Mozart system. For example <CODE>/usr/local/oz</CODE>.</P></LI></UL><P> We arrive at the profile customization shown in <A href="node7.html#fig.prof3">Figure&nbsp;6.3</A>. Don't forget to save it by clicking the <CODE>Save&nbsp;For&nbsp;Future&nbsp;Sessions</CODE> button. </P><DIV id="fig.prof3"><HR><P><A name="fig.prof3"></A></P><DIV align="center"><IMG alt="" src="prof3.gif"></DIV><P class="caption"><STRONG>Figure&nbsp;6.3:</STRONG> Global Profile</P><HR></DIV><P> </P><H3><A name="label216">6.1.2 Default Profile</A></H3><P>A so-called default profile consists of whatever settings were present in your environment when you started Emacs. This is for proper operation when you actually choose to invoke <CODE>oz</CODE> rather than plain <CODE>emacs</CODE>: in that case, the default profile consists of the settings established by the <CODE>oz</CODE> script. You can also create a default profile: </P><UL><LI><P>Give a name to the profile, e.&nbsp;g. <CODE>default</CODE></P></LI><LI><P>Select type <CODE>default</CODE></P></LI></UL><P> The only reason to have a named default profile is so that you can revert to the original settings in force when you started <CODE>oz</CODE> by switching to this profile. </P><H3><A name="label217">6.1.3 Build Profile</A></H3><P>Developers may find it marginally convenient to be able to define a profile where the emulator and all modules are looked up directly in the build tree. Here are the steps to follow: </P><UL><LI><P>Give a name to the profile, e.&nbsp;g. <CODE>build</CODE></P></LI><LI><P>Select type <CODE>build</CODE></P></LI><LI><P>Set the source directory: this is the top directory in which you checked out the Mozart sources</P></LI><LI><P>Set the build directory: this is the top directory in which you built the Mozart system</P></LI></UL><P> For example, <A href="node7.html#fig.prof4">Figure&nbsp;6.4</A> shows typical build settings on my laptop. </P><DIV id="fig.prof4"><HR><P><A name="fig.prof4"></A></P><DIV align="center"><IMG alt="" src="prof4.gif"></DIV><P class="caption"><STRONG>Figure&nbsp;6.4:</STRONG> Build Profile</P><HR></DIV><P> </P><H3><A name="label218">6.1.4 Debug Profile</A></H3><P>Developers will find it particularly convenient to be able to define debug profiles, i.&nbsp;e. build profiles for builds configured with <CODE>--enable-opt=d</CODE>, and, in particular the ability to state that they should be run under control of GDB. Here are the steps to follow: </P><UL><LI><P>Give a name to the profile, e.&nbsp;g. <CODE>debug</CODE></P></LI><LI><P>Select type <CODE>build</CODE></P></LI><LI><P>Set the source directory</P></LI><LI><P>Set the build directory</P></LI><LI><P>When compiling a debug emulator you really don't want to recompile the entire system, and in particular not the libraries because that is rather slow with a debug emulator. So, typically you will configure with <CODE>--enable-opt=d</CODE>, but then you will <CODE><SPAN class="builtin">cd</SPAN>&nbsp;platform</CODE> and invoke <CODE>make&nbsp;bootstrap</CODE> there. Yet, in order to run the system you need the rest too. This is why it is possible to specify a second build directory: this is supposed to be your usual build directory, not the one configured for debugging. By setting the second build directory, everything not found in the debug build directory is looked in the second build directory.</P></LI><LI><P>You can optionally, state that the debug profile should be started under control of GDB: select item <CODE>Run&nbsp;under&nbsp;GDB</CODE>, then select e.&nbsp;g. <CODE>Yes&nbsp;+&nbsp;Auto&nbsp;Start</CODE> from its value menu.</P></LI></UL><P> For example, <A href="node7.html#fig.prof5">Figure&nbsp;6.5</A> shows typical debug settings on my laptop. </P><DIV id="fig.prof5"><HR><P><A name="fig.prof5"></A></P><DIV align="center"><IMG alt="" src="prof5.gif"></DIV><P class="caption"><STRONG>Figure&nbsp;6.5:</STRONG> Build Profile</P><HR></DIV><P> Note that any profile can be set to run under GDB, but this is rarely useful except when used with a debug emulator. </P></DIV><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node6.html">- Up -</A></TD><TD><A href="node8.html#prof.params">Next &gt;&gt;</A></TD></TR></TABLE><HR><ADDRESS><A href="http://www.ps.uni-sb.de/~kornstae/">Leif&nbsp;Kornstaedt</A> and&nbsp;<A href="http://www.ps.uni-sb.de/~duchier/">Denys&nbsp;Duchier</A><BR><SPAN class="version">Version 1.4.0 (20080702)</SPAN></ADDRESS></BODY></HTML>
