<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>6.1 Setting up the Build Environment</TITLE><LINK href="ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node6.html">- Up -</A></TD><TD><A href="node8.html#section.cygwin.packages">Next &gt;&gt;</A></TD></TR></TABLE><DIV id="section.cygwin.environment"><H2><A name="section.cygwin.environment">6.1 Setting up the Build Environment</A></H2><DIV class="apropos"><P class="margin">Cygwin</P><P> From Version 1.2.1, Mozart can be built natively under Windows using the Cygwin environment. Cygwin is a Unix environment for Windows. In particular, it provides a C++ compiler (gcc), a Bourne-compatible shell (bash), and all the usual Unix command line tools. Cygwin can be obtained for free at <A href="http://www.cygwin.com/">http://www.cygwin.com/</A>. </P></DIV><P> Take yourself to a Windows machine (Windows XP Professional, Windows 2000 or Windows NT&nbsp;4 are preferred, though others may work) and install Cygwin (full installation preferred), then start a shell. Make sure that <CODE>uname&nbsp;-r</CODE> displays at least version 1.3.5. It is a good idea that you familiarize yourself with this environment, as you'll be using it for a while before your Mozart build is finished. I recommend that you read the <A href="http://cygwin.com/cygwin-ug-net/cygwin-ug-net.html">``Cygwin User's Guide''</A>. </P><DIV class="apropos"><P class="margin">Cygwin Basics</P><P> As you will have seen on the Cygwin web site, Cygwin actually consists of two parts: A DLL providing a significant part of the Unix API, and a collection of tools. The tools we need, the DLL we do not want. By default, all executables created by gcc require the Cygwin DLL (<CODE>cygwin1.dll</CODE>). This DLL provides the Unix emulation functionality, such as support for Cygwin-style file names (you do not know what this is? Read the User's Guide!) and mount points. If we built Mozart against this DLL, then we would need to ship it with Mozart (so that Mozart works on systems which do not have Cygwin installed). We do not want to ship it, and we do not need the Unix emulation, and we want to be a ``native'' Windows application, so we will use the <CODE>-mno-cygwin</CODE> flag to gcc throughout the build process. This flag in fact instructs gcc to act as a cross-compiler: the host environment being Windows with Cygwin, the target environment being native Windows. This cross-compiler is called <A href="http://www.mingw.org/">MinGW</A>, which is also available as a standalone product and as a cross-compiler hosted on Linux. </P></DIV><DIV class="apropos"><P class="margin">Headers and Libraries</P><P> Object files and libraries built for Cygwin do not work with object files and libraries built for MinGW. Instead of the header files in <CODE>/usr/include/</CODE> and the libraries in <CODE>/usr/lib/</CODE>, <CODE>gcc&nbsp;-mno-cygwin</CODE> therefore uses the header files from <CODE>/usr/include/mingw/</CODE> and the libraries from <CODE>/usr/lib/mingw/</CODE>. Instead of the Cygwin DLL, MinGW links executables against the Microsoft Visual C/C++ Runtime (<CODE>msvcrt.dll</CODE>), which we can redistribute with Mozart. </P></DIV><P> Mozart requires several packages. Even though some of these are provided with Cygwin, they are built for Cygwin, and we need them built for MinGW. So before we can actually start on the Mozart sources, we will build these additional packages. Thankfully we need to do this only once. </P></DIV><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node6.html">- Up -</A></TD><TD><A href="node8.html#section.cygwin.packages">Next &gt;&gt;</A></TD></TR></TABLE><HR><ADDRESS><A href="http://www.ps.uni-sb.de/~duchier/">Denys&nbsp;Duchier</A>, <A href="http://www.ps.uni-sb.de/~kornstae/">Leif&nbsp;Kornstaedt</A>, <A href="http://www.ps.uni-sb.de/~scheidhr/">Ralf&nbsp;Scheidhauer</A> and&nbsp;<A href="http://www.ps.uni-sb.de/~schulte/">Christian&nbsp;Schulte</A><BR><SPAN class="version">Version 1.4.0 (20080702)</SPAN></ADDRESS></BODY></HTML>
