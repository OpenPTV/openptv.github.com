<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Command-Line Application: Main.oz</TITLE><LINK href="ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node38.html#code.dict-client.tkdictionary">&lt;&lt; Prev</A></TD><TD><A href="dict-client.html">- Up -</A></TD></TR></TABLE><DIV class="unnumbered" id="code.dict-client.main"><H3><A name="code.dict-client.main">Command-Line Application: <CODE>Main.oz</CODE></A></H3><DIV class="apropos"><P class="margin"><A href="DictClient/Main.oz">Source File</A></P><P> </P><BLOCKQUOTE><PRE>%%<SPAN class="comment">&nbsp;<BR></SPAN>%%&nbsp;<SPAN class="comment">The&nbsp;Main&nbsp;Application<BR></SPAN>%%<SPAN class="comment">&nbsp;<BR></SPAN>%%&nbsp;<SPAN class="comment">Parse&nbsp;the&nbsp;command&nbsp;line,&nbsp;initialize&nbsp;the&nbsp;connection,<BR></SPAN>%%&nbsp;<SPAN class="comment">wait&nbsp;for&nbsp;the&nbsp;graphical&nbsp;front-end&nbsp;window&nbsp;to&nbsp;be&nbsp;closed<BR></SPAN>%%&nbsp;<SPAN class="comment">and&nbsp;exit.<BR></SPAN>%%<SPAN class="comment">&nbsp;<BR></SPAN>&nbsp;<BR><SPAN class="keyword">functor</SPAN>&nbsp;<BR><SPAN class="keyword">import</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;Application(getCmdArgs&nbsp;exit)<BR>&nbsp;&nbsp;&nbsp;System(printError)<BR>&nbsp;&nbsp;&nbsp;Property(get)<BR>&nbsp;&nbsp;&nbsp;TkDictionary(<SPAN class="string">'class'</SPAN>)<BR>&nbsp;&nbsp;&nbsp;GtkDictionary(<SPAN class="string">'class'</SPAN>)<BR><SPAN class="keyword">prepare</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;ArgSpec&nbsp;=&nbsp;record(help(rightmost&nbsp;char:&nbsp;[<SPAN class="string">&amp;?</SPAN>&nbsp;<SPAN class="string">&amp;h</SPAN>]&nbsp;default:&nbsp;<SPAN class="keyword">false</SPAN>)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server(single&nbsp;char:&nbsp;<SPAN class="string">&amp;s</SPAN>&nbsp;type:&nbsp;string&nbsp;default:&nbsp;<SPAN class="string">'dict.org'</SPAN>)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host(alias:&nbsp;server)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port(single&nbsp;char:&nbsp;<SPAN class="string">&amp;p</SPAN>&nbsp;type:&nbsp;int&nbsp;default:&nbsp;2628)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode(single&nbsp;type:&nbsp;atom(tk&nbsp;gtk)&nbsp;default:&nbsp;tk))<BR>&nbsp;<BR>&nbsp;&nbsp;&nbsp;UsageString&nbsp;=<BR>&nbsp;&nbsp;&nbsp;<SPAN class="string">'--help,&nbsp;-?,&nbsp;-h&nbsp;&nbsp;Display&nbsp;this&nbsp;message.\n'</SPAN><SPAN class="keyword">#</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN class="string">'--server=HOST,&nbsp;--host=HOST,&nbsp;-s&nbsp;HOST\n'</SPAN><SPAN class="keyword">#</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN class="string">'--port=PORT,&nbsp;-p&nbsp;PORT\n'</SPAN><SPAN class="keyword">#</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN class="string">'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initially&nbsp;try&nbsp;to&nbsp;connect&nbsp;to&nbsp;HOST&nbsp;on&nbsp;PORT.\n'</SPAN><SPAN class="keyword">#</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN class="string">'--mode=tk,&nbsp;--mode=gtk\n'</SPAN><SPAN class="keyword">#</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN class="string">'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Widget&nbsp;toolkit&nbsp;to&nbsp;use&nbsp;(default:&nbsp;tk).\n'</SPAN>&nbsp;<BR><SPAN class="keyword">define</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN class="keyword">proc</SPAN><SPAN class="variablename">&nbsp;</SPAN>{<SPAN class="functionname">Usage</SPAN>&nbsp;VS&nbsp;N}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{System<SPAN class="keyword">.</SPAN>printError<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VS<SPAN class="keyword">#</SPAN><SPAN class="string">'Usage:&nbsp;'</SPAN><SPAN class="keyword">#</SPAN>{Property<SPAN class="keyword">.</SPAN>get&nbsp;<SPAN class="string">'application.url'</SPAN>}<SPAN class="keyword">#</SPAN><SPAN class="string">'&nbsp;&lt;option&gt;&nbsp;...\n'</SPAN><SPAN class="keyword">#</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UsageString}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Application<SPAN class="keyword">.</SPAN>exit&nbsp;N}<BR>&nbsp;&nbsp;&nbsp;<SPAN class="keyword">end</SPAN>&nbsp;<BR>&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN class="keyword">try</SPAN>&nbsp;Args&nbsp;<SPAN class="keyword">in</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args&nbsp;=&nbsp;{Application<SPAN class="keyword">.</SPAN>getCmdArgs&nbsp;ArgSpec}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class="keyword">if</SPAN>&nbsp;Args<SPAN class="keyword">.</SPAN>help&nbsp;<SPAN class="keyword">then</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Usage&nbsp;<SPAN class="string">&quot;&quot;</SPAN>&nbsp;0}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class="keyword">end</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Wait&nbsp;{New&nbsp;<SPAN class="keyword">case</SPAN>&nbsp;Args<SPAN class="keyword">.</SPAN>mode&nbsp;<SPAN class="keyword">of</SPAN>&nbsp;tk&nbsp;<SPAN class="keyword">then</SPAN>&nbsp;TkDictionary<SPAN class="keyword">.</SPAN><SPAN class="string">'class'</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class="keyword">[]</SPAN>&nbsp;gtk&nbsp;<SPAN class="keyword">then</SPAN>&nbsp;GtkDictionary<SPAN class="keyword">.</SPAN><SPAN class="string">'class'</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class="keyword">end</SPAN>&nbsp;init(Args<SPAN class="keyword">.</SPAN>server&nbsp;Args<SPAN class="keyword">.</SPAN>port)}<SPAN class="keyword">.</SPAN>closed}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Application<SPAN class="keyword">.</SPAN>exit&nbsp;0}<BR>&nbsp;&nbsp;&nbsp;<SPAN class="keyword">catch</SPAN>&nbsp;error(ap(usage&nbsp;VS)&nbsp;<SPAN class="keyword">...</SPAN>)&nbsp;<SPAN class="keyword">then</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Usage&nbsp;<SPAN class="string">'Usage&nbsp;error:&nbsp;'</SPAN><SPAN class="keyword">#</SPAN>VS<SPAN class="keyword">#</SPAN><SPAN class="string">'\n'</SPAN>&nbsp;2}<BR>&nbsp;&nbsp;&nbsp;<SPAN class="keyword">end</SPAN>&nbsp;<BR><SPAN class="keyword">end</SPAN>&nbsp;<BR></PRE></BLOCKQUOTE><P> </P></DIV></DIV><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node38.html#code.dict-client.tkdictionary">&lt;&lt; Prev</A></TD><TD><A href="dict-client.html">- Up -</A></TD></TR></TABLE><HR><ADDRESS><SPAN class="version">Version 1.4.0 (20080702)</SPAN></ADDRESS></BODY></HTML>
