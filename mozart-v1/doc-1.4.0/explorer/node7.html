<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>7 User-defined Actions</TITLE><LINK href="ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node6.html#chapter.menu">&lt;&lt; Prev</A></TD><TD><A href="index.html">- Up -</A></TD><TD><A href="node8.html#chapter.object">Next &gt;&gt;</A></TD></TR></TABLE><DIV id="chapter.actions"><H1><A name="chapter.actions">7 User-defined Actions</A></H1><P> Actions for the Explorer can be user-defined. They must be provided as procedures to the <CODE>Explorer<SPAN class="keyword">.</SPAN>object</CODE>. </P><DIV id="section.actions.information"><H2><A name="section.actions.information">7.1 Information Actions</A></H2><P> </P><DL><DT><CODE>add</CODE> <A name="label10"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P></P><BLOCKQUOTE class="code"><CODE>{Explorer<SPAN class="keyword">.</SPAN>object&nbsp;add(information&nbsp;</CODE><CODE>+<I>PA</I></CODE><CODE>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;</CODE><CODE>+<I>V</I></CODE><CODE>&nbsp;<SPAN class="keyword">&lt;=</SPAN>&nbsp;_<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&nbsp;</CODE><CODE>+<I>A</I></CODE><CODE>&nbsp;<SPAN class="keyword">&lt;=</SPAN>&nbsp;root</CODE></BLOCKQUOTE><P> </P></BLOCKQUOTE></DD><DD><P>If <I>PA</I> is the atom <I>separator</I>, a separator entry is added as last entry of the <EM>Information Action</EM> sub menu. </P><P> Otherwise, an entry with label <I>V</I> (a virtual string) is added to the <EM>Information Action</EM> sub menu, from which <I>PA</I> can be selected. If the <CODE>label</CODE> feature is missing, the printname of <I>PA</I> is taken as label instead. <I>PA</I> must be either a binary or ternary procedure. </P><P> When the information action is invoked, <I>PA</I> is applied with the integer tagging the current node as first actual argument. The second actual argument depends on <I>A</I>. If <I>A</I> is <CODE>root</CODE> (the default) the argument is the root variable of the space attached to the current node. If <I>A</I> is <CODE>space</CODE> the argument is the space itself. If <I>A</I> is <CODE>procedure</CODE> the argument is a unary procedure <I>P</I>. On application, <I>P</I> returns the root variable of a copy of the space. </P><P> If <I>PA</I> is a ternary procedure, it must return either a nullary procedure <I>P</I> or a pair <I>O</I><CODE><SPAN class="keyword">#</SPAN></CODE><I>M</I> of an object <I>O</I> and a message <I>M</I>. When the Explorer is cleared, reset, or closed, a new thread is created that runs either <CODE>{</CODE><I>P</I><CODE>}</CODE> or <CODE>{</CODE><I>O</I><CODE>&nbsp;</CODE><I>M</I><CODE>}</CODE> is executed. </P><P> For example, the default information action can be defined as follows: </P><BLOCKQUOTE class="code"><CODE>{Explorer<SPAN class="keyword">.</SPAN>object&nbsp;add(information&nbsp;<SPAN class="keyword">proc</SPAN><SPAN class="variablename">&nbsp;</SPAN>{<SPAN class="functionname">$</SPAN>&nbsp;I&nbsp;X}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Inspector<SPAN class="keyword">.</SPAN>inspect&nbsp;I<SPAN class="keyword">#</SPAN>X}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class="keyword">end</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;<SPAN class="string">'Inspect'</SPAN>)}</CODE></BLOCKQUOTE><P> </P></DD><DT><CODE>delete</CODE> <A name="label11"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P></P><BLOCKQUOTE class="code"><CODE>{Explorer<SPAN class="keyword">.</SPAN>object&nbsp;delete(information&nbsp;</CODE><CODE>+<I>PA</I></CODE><CODE>)}</CODE></BLOCKQUOTE><P> </P></BLOCKQUOTE></DD><DD><P>Deletes the information action <I>PA</I> from the <EM>Information Action</EM> submenu. If <I>PA</I> is the atom <CODE>all</CODE>, all but the default information actions are deleted from the submenu. </P><P> For example, after adding an information action <I>P</I> by </P><BLOCKQUOTE class="code"><CODE>{Explorer&nbsp;add(information&nbsp;</CODE><I>P</I><CODE>)}</CODE></BLOCKQUOTE><P> it can be deleted by </P><BLOCKQUOTE class="code"><CODE>{Explorer&nbsp;delete(information&nbsp;</CODE><I>P</I><CODE>)}</CODE></BLOCKQUOTE><P> </P></DD></DL><P> </P></DIV><DIV id="section.actions.compare"><H2><A name="section.actions.compare">7.2 Compare Actions</A></H2><P> </P><DL><DT><CODE>add</CODE> <A name="label12"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P></P><BLOCKQUOTE class="code"><CODE>{Explorer<SPAN class="keyword">.</SPAN>object&nbsp;add(compare&nbsp;</CODE><CODE>+<I>PA</I></CODE><CODE>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;</CODE><CODE>+<I>V</I></CODE><CODE>&nbsp;<SPAN class="keyword">&lt;=</SPAN>&nbsp;_<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;&nbsp;</CODE><CODE>+<I>A</I></CODE><CODE>&nbsp;<SPAN class="keyword">&lt;=</SPAN>&nbsp;root</CODE></BLOCKQUOTE><P> </P></BLOCKQUOTE></DD><DD><P>If <I>PA</I> is the atom <CODE>separator</CODE>, a separator entry is added to the bottom of the <EM>Compare Action</EM> submenu. </P><P> Otherwise, an entry with label <I>V</I> (a virtual string) is added to the <EM>Compare Action</EM> submenu, from which <I>PA</I> can be selected. If the <CODE>label</CODE> feature is missing, the printname of <I>PA</I> is taken as label instead. <I>PA</I> must be either a $4$-ary or $5$-ary procedure. When the compare action is invoked, <I>PA</I> is applied with the integer tagging the compare (current) node as first (third) actual argument. The second (fourth) actual argument is the computation space attached to the compare (current) node. These arguments depend on <I>A</I> as explained for adding information actions. </P><P> If <I>PA</I> is a $5$-ary procedure, it must return either a nullary procedure <I>P</I> or a pair <I>O</I><CODE><SPAN class="keyword">#</SPAN></CODE><I>M</I> of an object <I>O</I> and a message <I>M</I>. When the Explorer is cleared, reset, or closed, a new thread is created that runs either <CODE>{</CODE><I>P</I><CODE>}</CODE> or <CODE>{</CODE><I>O</I><CODE>&nbsp;</CODE><I>M</I><CODE>}</CODE> is executed. </P><P> For example, the default compare action can be defined as follows: </P><BLOCKQUOTE class="code"><CODE>{Explorer<SPAN class="keyword">.</SPAN>object&nbsp;add(compare&nbsp;<SPAN class="keyword">proc</SPAN><SPAN class="variablename">&nbsp;</SPAN>{<SPAN class="functionname">$</SPAN>&nbsp;I1&nbsp;X1&nbsp;I2&nbsp;X2}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Inspector<SPAN class="keyword">.</SPAN>inspect&nbsp;I1<SPAN class="keyword">#</SPAN>I2<SPAN class="keyword">#</SPAN>X1<SPAN class="keyword">#</SPAN>X2}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class="keyword">end</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;<SPAN class="string">'Inspect'</SPAN>)}</CODE></BLOCKQUOTE><P> </P></DD><DT><CODE>delete</CODE> <A name="label13"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P></P><BLOCKQUOTE class="code"><CODE>{Explorer<SPAN class="keyword">.</SPAN>object&nbsp;delete(compare&nbsp;</CODE><CODE>+<I>PA</I></CODE><CODE>)}</CODE></BLOCKQUOTE><P> </P></BLOCKQUOTE></DD><DD><P>Deletes the compare action <I>P</I> from the <EM>Compare Action</EM> submenu. If <I>PA</I> is the atom <CODE>all</CODE>, all but the default compare actions are deleted from the submenu. </P></DD></DL><P> </P></DIV><DIV id="section.actions.statistics"><H2><A name="section.actions.statistics">7.3 Statistics Actions</A></H2><P> </P><DL><DT><CODE>add</CODE> <A name="label14"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P></P><BLOCKQUOTE class="code"><CODE>{Explorer<SPAN class="keyword">.</SPAN>object&nbsp;add(statistics&nbsp;</CODE><CODE>+<I>PA</I></CODE><CODE>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;</CODE><CODE>+<I>V</I></CODE><CODE>&nbsp;<SPAN class="keyword">&lt;=</SPAN>&nbsp;_)</CODE></BLOCKQUOTE><P> </P></BLOCKQUOTE></DD><DD><P>If <I>PA</I> is the atom <CODE>separator</CODE>, a separator entry is added to the bottom of the <EM>Statistics Action</EM> sub menu. </P><P> Otherwise, an entry with label <I>V</I> (a virtual string) is added to the <EM>Statistics Action</EM> sub menu, from which <I>PA</I> can be selected. If the <CODE>label</CODE> feature is missing, the printname of <I>PA</I> is taken as label instead. <I>PA</I> must be either a binary or ternary procedure. When the information action is invoked, <I>PA</I> is applied with the integer tagging the current node as first actual argument. The second actual argument is a record as follows: </P><BLOCKQUOTE class="code"><CODE>stat(c:&nbsp;</CODE>...<CODE>&nbsp;%&nbsp;<SPAN class="comment">number&nbsp;of&nbsp;choice&nbsp;nodes<BR></SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s:&nbsp;</CODE>...<CODE>&nbsp;%&nbsp;<SPAN class="comment">number&nbsp;of&nbsp;solved&nbsp;nodes<BR></SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f:&nbsp;</CODE>...<CODE>&nbsp;%&nbsp;<SPAN class="comment">number&nbsp;of&nbsp;failed&nbsp;nodes<BR></SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b:&nbsp;</CODE>...<CODE>&nbsp;%&nbsp;<SPAN class="comment">number&nbsp;of&nbsp;suspended&nbsp;nodes<BR></SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start:&nbsp;</CODE>...<CODE>&nbsp;%&nbsp;<SPAN class="comment">depth&nbsp;of&nbsp;current&nbsp;node<BR></SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depth:&nbsp;</CODE>...<CODE>&nbsp;%&nbsp;<SPAN class="comment">depth&nbsp;of&nbsp;current&nbsp;subtree<BR></SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shape:&nbsp;</CODE>...<CODE>&nbsp;%&nbsp;<SPAN class="comment">describes&nbsp;current&nbsp;subtree<BR></SPAN>&nbsp;&nbsp;&nbsp;&nbsp;)</CODE></BLOCKQUOTE><P> </P><P> The value for the feature <CODE>shape</CODE> is either <CODE>s</CODE>, <CODE>f</CODE>, or <CODE>b</CODE> with the meaning from above or a unary tuple with label <CODE>c</CODE>. The argument of the tuple is a list where the elements recursively describe the shapes of the choice node's subtrees. </P><P> For example, invoking a statistics action on the following subtree; </P><P> </P><DIV align="center"><IMG alt="" src="stat-ex.png" id="pic.stat-ex"></DIV><P> </P><P> the second actual argument is as follows: </P><BLOCKQUOTE class="code"><CODE>stat(c:4&nbsp;s:1&nbsp;f:1&nbsp;b:1&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start:1&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depth:4&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shape:&nbsp;c([c([s&nbsp;f])&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c([c([b])])])&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;)</CODE></BLOCKQUOTE><P> </P><P> If <I>PA</I> is a ternary procedure, it must return either a nullary procedure <I>P</I> or a pair <I>O</I><CODE><SPAN class="keyword">#</SPAN></CODE><I>M</I> of an object <I>O</I> and a message <I>M</I>. When the Explorer is cleared, reset, or closed, a new thread is created that runs either <CODE>{</CODE><I>P</I><CODE>}</CODE> or <CODE>{</CODE><I>O</I><CODE>&nbsp;</CODE><I>M</I><CODE>}</CODE> is executed. </P><P> For example, the default statistics action can be defined as follows: </P><BLOCKQUOTE class="code"><CODE>{Explorer<SPAN class="keyword">.</SPAN>object&nbsp;add(statistics&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class="keyword">proc</SPAN><SPAN class="variablename">&nbsp;</SPAN>{<SPAN class="functionname">$</SPAN>&nbsp;I&nbsp;R}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Inspector<SPAN class="keyword">.</SPAN>inspect&nbsp;I<SPAN class="keyword">#</SPAN>{Record<SPAN class="keyword">.</SPAN>subtract&nbsp;R&nbsp;shape}}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN class="keyword">end</SPAN>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label:&nbsp;<SPAN class="string">'Inspect'</SPAN>)</CODE></BLOCKQUOTE><P> </P></DD><DT><CODE>delete</CODE> <A name="label15"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P></P><BLOCKQUOTE class="code"><CODE>{Explorer<SPAN class="keyword">.</SPAN>object&nbsp;delete(statistics&nbsp;</CODE><CODE>+<I>PA</I></CODE><CODE>)}</CODE></BLOCKQUOTE><P> </P></BLOCKQUOTE></DD><DD><P>Deletes the statistics action <I>P</I> from the <EM>Statistics Action</EM> submenu. If <I>PA</I> is the atom <CODE>all</CODE>, all but the default statistics actions are deleted from the submenu. </P></DD></DL><P> </P></DIV></DIV><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node6.html#chapter.menu">&lt;&lt; Prev</A></TD><TD><A href="index.html">- Up -</A></TD><TD><A href="node8.html#chapter.object">Next &gt;&gt;</A></TD></TR></TABLE><HR><ADDRESS><A href="http://www.ps.uni-sb.de/~schulte/">Christian&nbsp;Schulte</A><BR><SPAN class="version">Version 1.4.0 (20080702)</SPAN></ADDRESS></BODY></HTML>
